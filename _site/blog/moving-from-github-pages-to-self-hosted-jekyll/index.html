<p>Last year I <a href="/blog/hello-jekyll/">migrated this site to Jekyll.</a> One of the reasons was I really didn&#39;t want to worry about my own server, and the option was there to use Github pages for free.</p>

<p>I have a custom build process for my site, using Grunt. This meant I couldn&#39;t take full advantage of the automated build process of Github pages. I built the site on my local machine and used <a href="https://github.com/robwierzbowski/grunt-build-control">grunt-build-control</a> to deploy this to a <a href="https://github.com/lewisnyman/lewisnyman.github.io">separate github repo.</a> Not pretty but it works.</p>

<p>Recently, I&#39;ve been feeling the need to own my server again. It&#39;s a pain having to build on my own machine, meaning I&#39;m tied to it for creating content.</p>

<p>As I want to <a href="(/blog/indie-web-camp-2015/)">move towards publishing more content</a> on this site I need to make it more flexible. I thought about introducing support for <a href="http://indiewebcamp.com/note">notes</a> and <a href="http://indiewebcamp.com/micropub">micropub</a> and realised that having an automated build process was a blocker.</p>

<p>I also want to start pulling in all my data from other services I use and maybe doing something cool (eg. <a href="https://gyrosco.pe">gyrosco.pe</a>) . To do that, I&#39;m going to need a persistent server somewhere storing and serving data.</p>

<p>This was my process:</p>

<ol>
<li>Install Nginx and setup a folder that serves HTML from test.lewisnyman.co.uk (for now)</li>
<li>Install build dependencies (RVM, NPM, Bundler, Sinatra, etc)</li>
<li>Create a build script that runs a Sinatra server, nginx forwards all requests to api.lewisnyman.co.uk to there.</li>
<li>Setup the Github webhook to hit the api endpoint on push</li>
<li>Debug the sinatra script for an hour</li>
</ol>

<p>I&#39;m happy to put the build script on github once it&#39;s tested and I know it&#39;s secure. It&#39;s very similar to the one in the tutorial <a href="http://petemichaud.github.io/2013/09/05/multisite-server-jekyll-digitalocean.html">Automagic Multisite Server with Jekyll and Nginx on a DigitalOcean Droplet</a> but with less abstraction to keep it simple.</p>

<p>I used these tutorials and documentation to help me set up the Digital Ocean droplet and the build process. I want to write this up in more detail as simple tutorial for newbies.</p>

<p>Special thanks to the lovely <a href="https://twitter.com/joesb">Joe Baker</a> for giving me some pointers.</p>

<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7">How To Install Nginx on CentOS 7</a></li>
<li><a href="http://nginx.org/en/docs/beginners_guide.html">Nginx beginners guide</a></li>
<li><a href="http://petemichaud.github.io/2013/09/05/multisite-server-jekyll-digitalocean.html">Automagic Multisite Server with Jekyll and Nginx on a DigitalOcean Droplet</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-a-centos-7-server">How To Install Node.js on a CentOS 7 server</a></li>
<li><a href="https://rvm.io/rvm/install">Installing RVM</a></li>
<li><a href="http://www.sinatrarb.com/documentation.html">Sinatra documentation</a></li>
<li><a href="https://jonathanstark.com/blog/deploying-code-automatically-with-github-webhooks">Deploying Automatically with Github WebHooks</a></li>
<li><a href="https://developer.github.com/webhooks/">Github webhooks</a></li>
</ul>
